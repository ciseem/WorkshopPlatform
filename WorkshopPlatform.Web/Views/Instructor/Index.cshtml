@model IEnumerable<WorkshopPlatform.Core.Entities.Workshop>
@using System.Linq
@{
    ViewData["Title"] = "Eğitmen Paneli";
}

<div class="flex justify-between items-center mb-8 pb-6" style="border-bottom: 1px solid var(--gray-200);">
    <div>
        <h3 class="font-extrabold mb-1" style="font-size: 1.75rem; color: var(--dark);">Eğitmen Paneli</h3>
        <p class="text-secondary" style="font-size: 0.875rem; font-weight: 500;">Eğitimlerinizi yönetin ve performansınızı takip edin.</p>
    </div>
    <a asp-action="Create" class="btn-elite" style="text-decoration: none;"><i class="fas fa-plus-circle mr-2"></i> Yeni Workshop Oluştur</a>
</div>

<!-- Instructor Stats -->
<div class="stats-grid mb-8">
    <div class="premium-card stat-item">
        <span class="stat-label">Aktif Eğitimlerim</span>
        <span class="stat-value">@ViewBag.ActiveWorkshops</span>
    </div>
    <div class="premium-card stat-item">
        <span class="stat-label">Toplam Öğrenci</span>
        <span class="stat-value">@ViewBag.TotalStudents</span>
    </div>
    <div class="premium-card stat-item">
        <span class="stat-label">Tahmini Kazanç</span>
        <span class="stat-value text-success">@(((decimal)(ViewBag.TotalIncome ?? 0)).ToString("C2"))</span>
    </div>
    <div class="premium-card stat-item">
        <span class="stat-label">Profil Puanı</span>
        <span class="stat-value text-primary">9.8</span>
    </div>
</div>

<div class="premium-card" style="padding: 0; overflow: hidden;">
    <div style="overflow-x: auto;">
        <table class="elite-table">
            <thead>
                <tr>
                    <th>Workshop Başlığı</th>
                    <th>Kategori</th>
                    <th>Ücret</th>
                    <th>Kontenjan</th>
                    <th>Durum</th>
                    <th class="text-right">Yönetim</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td class="font-bold">
                            <div>@item.Baslik</div>
                            <div class="text-secondary" style="font-size: 0.7rem; font-weight: 500;">Ref: #@item.Id</div>
                        </td>
                        <td>
                            <span class="badge" style="background: var(--gray-100); color: var(--primary); border: 1px solid var(--gray-200);">@item.Kategori</span>
                        </td>
                        <td class="font-bold">
                            @(item.UcretliMi ? item.Fiyat?.ToString("C2") : "Ücretsiz")
                        </td>
                        <td class="font-bold">
                            <span>@(item.Seanslar?.FirstOrDefault()?.Kontenjan ?? 20)</span>
                        </td>
                        <td>
                            <span class="flex items-center gap-2 font-bold" style="font-size: 0.75rem; color: @(item.Durum == WorkshopPlatform.Core.Enums.WorkshopDurum.Aktif ? "var(--success)" : "var(--secondary)")">
                                <i class="fas @(item.Durum == WorkshopPlatform.Core.Enums.WorkshopDurum.Aktif ? "fa-check-circle" : "fa-clock")"></i>
                                @item.Durum
                            </span>
                        </td>
                        <td class="text-right">
                            <div class="flex gap-2" style="justify-content: flex-end;">
                                <a asp-action="Participants" asp-route-id="@item.Id" class="premium-btn-sm" style="padding: 0.5rem 1rem; background: var(--primary); color: white; border: none; font-size: 0.75rem;"><i class="fas fa-users mr-2"></i> Katılımcılar</a>
                                <a asp-action="Edit" asp-route-id="@item.Id" class="premium-btn-sm" style="padding: 0.5rem; width: 32px; height: 32px; justify-content: center; background: var(--gray-100); color: var(--dark); border: 1px solid var(--gray-200);"><i class="fas fa-edit"></i></a>
                                
                                <form asp-action="Delete" asp-route-id="@item.Id" method="post" style="display:inline;" onsubmit="return confirm('Bu eğitimi silmek istediğinize emin misiniz?');">
                                    <button type="submit" class="premium-btn-sm" style="padding: 0.5rem; width: 32px; height: 32px; justify-content: center; background: var(--danger-light); color: var(--danger); border: 1px solid var(--danger-light); cursor: pointer;"><i class="fas fa-trash"></i></button>
                                </form>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
